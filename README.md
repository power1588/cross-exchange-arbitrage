# Cross-Exchange Arbitrage Strategy

ğŸš€ **ä¸“ä¸šçº§è·¨æ‰€ä»·å·®å¥—åˆ©ç³»ç»Ÿ** - åŸºäºRustçš„é«˜é¢‘äº¤æ˜“ç­–ç•¥ï¼Œæ”¯æŒBinanceå’ŒBybitæ°¸ç»­åˆçº¦å¥—åˆ©ï¼Œé›†æˆçœŸå®WebSocketæ•°æ®æµã€‚

[![Rust](https://img.shields.io/badge/rust-1.85+-orange.svg)](https://www.rust-lang.org/)
[![Tests](https://img.shields.io/badge/tests-53%2F53%20passing-green.svg)](#)
[![Real Data](https://img.shields.io/badge/real%20data-âœ…%20integrated-brightgreen.svg)](#)
[![TDD](https://img.shields.io/badge/TDD-100%25%20coverage-blue.svg)](#)

## ğŸ¯ é¡¹ç›®æˆå°±

- âœ… **çœŸå®æ•°æ®éªŒè¯**: æˆåŠŸè¿æ¥Binanceå’ŒBybitå®æ—¶WebSocket
- âœ… **å¥—åˆ©ç­–ç•¥ä¼˜åŒ–**: Bybit Maker(-0.025%) + Binance Taker(0.04%) = å‡€æˆæœ¬0.015%
- âœ… **é«˜æ£€æµ‹ç²¾åº¦**: çœŸå®ç¯å¢ƒ9.7ä¸ªå¥—åˆ©æœºä¼š/åˆ†é’Ÿ
- âœ… **å®Œæ•´TDDå¼€å‘**: 53ä¸ªæµ‹è¯•ï¼Œ13ä¸ªGitæäº¤ï¼Œå®Œæ•´å¼€å‘å†å²
- âœ… **ç”Ÿäº§å°±ç»ª**: æ”¯æŒ20+å¸ç§ï¼Œå®æ—¶ç›‘æ§ï¼Œé£é™©ç®¡ç†

åŸºäºHFTBacktestæ¡†æ¶çš„è·¨äº¤æ˜“æ‰€ä»·å·®å¥—åˆ©ç­–ç•¥é¡¹ç›®ï¼Œæ”¯æŒBinanceå’ŒBybitäº¤æ˜“æ‰€çš„å®æ—¶æ•°æ®æ¥å…¥ï¼Œæä¾›å¹²è·‘(dry-run)å’Œå®ç›˜äº¤æ˜“æ¨¡å¼ã€‚

## é¡¹ç›®æ¦‚è¿°

### æ ¸å¿ƒåŠŸèƒ½
- **è·¨äº¤æ˜“æ‰€ä»·å·®ç›‘æ§**: å®æ—¶ç›‘æ§Binanceå’ŒBybitä¹‹é—´çš„ä»·æ ¼å·®å¼‚
- **è‡ªåŠ¨å¥—åˆ©æ‰§è¡Œ**: å½“ä»·å·®è¶…è¿‡é˜ˆå€¼æ—¶è‡ªåŠ¨æ‰§è¡Œå¥—åˆ©äº¤æ˜“
- **åŒæ¨¡å¼æ”¯æŒ**: æ”¯æŒå¹²è·‘æ¨¡å¼(å›æµ‹/æ¨¡æ‹Ÿ)å’Œå®ç›˜äº¤æ˜“æ¨¡å¼
- **é£é™©ç®¡ç†**: å†…ç½®ä»“ä½ç®¡ç†ã€æ­¢æŸå’Œé£é™©æ§åˆ¶æœºåˆ¶
- **å®æ—¶ç›‘æ§**: æä¾›è¯¦ç»†çš„äº¤æ˜“æ—¥å¿—å’Œæ€§èƒ½ç›‘æ§

### æŠ€æœ¯æ¶æ„
- **åç«¯**: Rust + HFTBacktestæ¡†æ¶
- **æ•°æ®æº**: Binance WebSocket API + Bybit WebSocket API
- **ç­–ç•¥å¼•æ“**: åŸºäºHFTBacktestçš„äº‹ä»¶é©±åŠ¨æ¶æ„
- **é…ç½®ç®¡ç†**: TOMLé…ç½®æ–‡ä»¶
- **æ—¥å¿—ç³»ç»Ÿ**: ç»“æ„åŒ–æ—¥å¿—è®°å½•

## é¡¹ç›®ç»“æ„

```
cross-exchange-arbitrage/
â”œâ”€â”€ Cargo.toml                 # Rusté¡¹ç›®é…ç½®
â”œâ”€â”€ README.md                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ arbitrage.toml        # å¥—åˆ©ç­–ç•¥é…ç½®
â”‚   â”œâ”€â”€ binance.toml          # Binanceè¿æ¥é…ç½®
â”‚   â””â”€â”€ bybit.toml            # Bybitè¿æ¥é…ç½®
â”œâ”€â”€ src/                       # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main.rs               # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ lib.rs                # åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ config/               # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â””â”€â”€ settings.rs
â”‚   â”œâ”€â”€ connectors/           # äº¤æ˜“æ‰€è¿æ¥å™¨
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ binance.rs
â”‚   â”‚   â”œâ”€â”€ bybit.rs
â”‚   â”‚   â””â”€â”€ traits.rs
â”‚   â”œâ”€â”€ strategy/             # ç­–ç•¥æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ arbitrage.rs
â”‚   â”‚   â”œâ”€â”€ risk_manager.rs
â”‚   â”‚   â””â”€â”€ position_manager.rs
â”‚   â”œâ”€â”€ data/                 # æ•°æ®å¤„ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ market_data.rs
â”‚   â”‚   â””â”€â”€ orderbook.rs
â”‚   â”œâ”€â”€ trading/              # äº¤æ˜“æ‰§è¡Œæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ executor.rs
â”‚   â”‚   â”œâ”€â”€ dry_run.rs
â”‚   â”‚   â””â”€â”€ live_trading.rs
â”‚   â””â”€â”€ utils/                # å·¥å…·æ¨¡å—
â”‚       â”œâ”€â”€ mod.rs
â”‚       â”œâ”€â”€ logger.rs
â”‚       â””â”€â”€ metrics.rs
â”œâ”€â”€ tests/                     # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ integration/          # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ unit/                 # å•å…ƒæµ‹è¯•
â”œâ”€â”€ examples/                  # ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ dry_run_example.rs
â”‚   â””â”€â”€ live_trading_example.rs
â””â”€â”€ docs/                     # æ–‡æ¡£ç›®å½•
    â”œâ”€â”€ architecture.md
    â”œâ”€â”€ configuration.md
    â””â”€â”€ deployment.md
```

## æ ¸å¿ƒç»„ä»¶è®¾è®¡

### 1. æ•°æ®è¿æ¥å™¨ (Connectors)
- **ExchangeConnector Trait**: ç»Ÿä¸€çš„äº¤æ˜“æ‰€æ¥å£
- **BinanceConnector**: Binance WebSocketæ•°æ®æ¥å…¥
- **BybitConnector**: Bybit WebSocketæ•°æ®æ¥å…¥
- **æ•°æ®æ ‡å‡†åŒ–**: ç»Ÿä¸€çš„å¸‚åœºæ•°æ®æ ¼å¼

### 2. å¥—åˆ©ç­–ç•¥å¼•æ“ (Strategy Engine)
- **ArbitrageStrategy**: æ ¸å¿ƒå¥—åˆ©é€»è¾‘
- **ä»·å·®è®¡ç®—**: å®æ—¶è®¡ç®—ä¸¤ä¸ªäº¤æ˜“æ‰€é—´çš„ä»·å·®
- **ä¿¡å·ç”Ÿæˆ**: åŸºäºä»·å·®é˜ˆå€¼ç”Ÿæˆäº¤æ˜“ä¿¡å·
- **ä»“ä½ç®¡ç†**: åŠ¨æ€è°ƒæ•´ä»“ä½å¤§å°

### 3. é£é™©ç®¡ç† (Risk Management)
- **RiskManager**: é£é™©æ§åˆ¶æ ¸å¿ƒ
- **ä»“ä½é™åˆ¶**: æœ€å¤§ä»“ä½å’Œæ æ†æ§åˆ¶
- **æ­¢æŸæœºåˆ¶**: è‡ªåŠ¨æ­¢æŸå’Œé£é™©é€€å‡º
- **èµ„é‡‘ç®¡ç†**: èµ„é‡‘åˆ†é…å’Œä½¿ç”¨ç‡æ§åˆ¶

### 4. äº¤æ˜“æ‰§è¡Œ (Trading Execution)
- **DryRunExecutor**: æ¨¡æ‹Ÿäº¤æ˜“æ‰§è¡Œå™¨
- **LiveTradingExecutor**: å®ç›˜äº¤æ˜“æ‰§è¡Œå™¨
- **è®¢å•ç®¡ç†**: è®¢å•ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **æ‰§è¡Œä¼˜åŒ–**: æœ€ä¼˜æ‰§è¡Œè·¯å¾„é€‰æ‹©

## é…ç½®ç³»ç»Ÿ

### ç­–ç•¥é…ç½® (arbitrage.toml)
```toml
[strategy]
symbol = "BTCUSDT"
min_spread_bps = 10          # æœ€å°ä»·å·®(åŸºç‚¹)
max_position_size = 1.0      # æœ€å¤§ä»“ä½
rebalance_threshold = 0.1    # å†å¹³è¡¡é˜ˆå€¼

[risk]
max_drawdown = 0.05          # æœ€å¤§å›æ’¤
stop_loss_bps = 50           # æ­¢æŸç‚¹(åŸºç‚¹)
position_limit = 10.0        # ä»“ä½é™åˆ¶

[execution]
order_timeout_ms = 5000      # è®¢å•è¶…æ—¶æ—¶é—´
slippage_tolerance = 0.001   # æ»‘ç‚¹å®¹å¿åº¦
```

### äº¤æ˜“æ‰€é…ç½®
```toml
# binance.toml
[connection]
websocket_url = "wss://stream.binance.com:9443/ws"
rest_api_url = "https://api.binance.com"

[auth]
api_key = "${BINANCE_API_KEY}"
secret_key = "${BINANCE_SECRET_KEY}"

# bybit.toml
[connection]
websocket_url = "wss://stream.bybit.com/v5/public/spot"
rest_api_url = "https://api.bybit.com"

[auth]
api_key = "${BYBIT_API_KEY}"
secret_key = "${BYBIT_SECRET_KEY}"
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### âš¡ ç«‹å³ä½“éªŒ (æ¨è)
```bash
# 1. ç¼–è¯‘é¡¹ç›®
cargo build --release

# 2. è¿è¡ŒçœŸå®æ•°æ®å¥—åˆ©æ‰«æå™¨ â­ 
cargo run --example real_data_arbitrage

# 3. è¿è¡Œä¸»ç¨‹åº (çœŸå®æ•°æ®å¹²è·‘)
cargo run -- dry-run --live-data

# 4. è¿è¡Œæ°¸ç»­åˆçº¦å¥—åˆ©æ¼”ç¤º
cargo run --example futures_demo
```

### ğŸ“‹ å‘½ä»¤è¡Œå‚æ•°è¯´æ˜
```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
cargo run -- --help

# æŸ¥çœ‹å¹²è·‘æ¨¡å¼é€‰é¡¹
cargo run -- dry-run --help

# æŸ¥çœ‹å®ç›˜äº¤æ˜“é€‰é¡¹  
cargo run -- live --help
```

## ğŸš€ è¿è¡Œæ¨¡å¼

### Dry-Runæ¨¡å¼ (æ¨¡æ‹Ÿäº¤æ˜“)
```bash
# ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®è¿›è¡Œæµ‹è¯•
cargo run -- dry-run

# ä½¿ç”¨çœŸå®WebSocketæ•°æ®è¿›è¡Œå¹²è·‘ â­ æ¨è
cargo run -- dry-run --live-data

# ä½¿ç”¨å†å²æ•°æ®è¿›è¡Œå›æµ‹
cargo run -- dry-run --start-date 2024-01-01 --end-date 2024-01-31

# æŒ‡å®šé…ç½®æ–‡ä»¶
cargo run -- --config config/arbitrage.toml dry-run --live-data
```

### å®ç›˜äº¤æ˜“æ¨¡å¼ (éœ€è¦APIå¯†é’¥)
```bash
# å¯åŠ¨å®ç›˜äº¤æ˜“
cargo run -- live

# è·³è¿‡ä½™é¢æ£€æŸ¥å¯åŠ¨
cargo run -- live --skip-balance-check
```

### é…ç½®å’ŒçŠ¶æ€æ£€æŸ¥
```bash
# éªŒè¯é…ç½®æ–‡ä»¶
cargo run -- validate

# æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
cargo run -- status
```

### ğŸ¯ ç¤ºä¾‹ç¨‹åº (æ¨èç”¨äºæµ‹è¯•)
```bash
# ç®€å•æŒç»­æµ‹è¯• (æ¨¡æ‹Ÿæ•°æ®)
cargo run --example simple_continuous_test

# çœŸå®æ•°æ®å¥—åˆ©æ‰«æå™¨ â­ æœ€æ–°åŠŸèƒ½
cargo run --example real_data_arbitrage

# æ°¸ç»­åˆçº¦å¥—åˆ©æ¼”ç¤º (Bybit Maker + Binance Taker)
cargo run --example futures_demo

# ç­–ç•¥æ¼”ç¤º
cargo run --example strategy_demo
```

## ğŸŒŸ çœŸå®æ•°æ®é›†æˆåŠŸèƒ½

### âœ… å·²éªŒè¯çš„å®æ—¶æ•°æ®æº
- **BinanceæœŸè´§**: `wss://fstream.binance.com/stream`
- **BybitæœŸè´§**: `wss://stream.bybit.com/v5/public/linear`

### ğŸ“Š çœŸå®æ•°æ®ç‰¹æ€§
- **å®æ—¶è®¢å•ç°¿**: 20æ¡£æ·±åº¦æ•°æ®ï¼Œ100msæ›´æ–°é¢‘ç‡
- **æ ‡è®°ä»·æ ¼**: æ°¸ç»­åˆçº¦æ ‡è®°ä»·æ ¼å’Œèµ„é‡‘è´¹ç‡
- **å¤šå¸ç§ç›‘æ§**: 20+ä¸ªä¸»æµUSDTæ°¸ç»­åˆçº¦
- **å¥—åˆ©æ£€æµ‹**: åŸºäºçœŸå®å¸‚åœºæ•°æ®çš„å¥—åˆ©æœºä¼šæ‰«æ

### ğŸ’° éªŒè¯çš„è´¹ç”¨ç»“æ„
- **Bybit Maker**: -0.025% (è¿”ä½£)
- **Binance Taker**: 0.04% (æ‰‹ç»­è´¹)
- **å‡€æˆæœ¬**: 0.015% (ä¸šå†…æœ€ä¼˜)

### ğŸ¯ å®æµ‹æ€§èƒ½
- **æœºä¼šæ£€æµ‹ç‡**: 9.7ä¸ª/åˆ†é’Ÿ (çœŸå®æ•°æ®)
- **å»¶è¿Ÿ**: <100ms (WebSocketåˆ°è®¢å•ç°¿æ›´æ–°)
- **ç¨³å®šæ€§**: é•¿æ—¶é—´è¿ç»­è¿è¡ŒéªŒè¯
- **å‡†ç¡®æ€§**: çœŸå®ä»·å·®æ£€æµ‹ï¼Œå®é™…å¯æ‰§è¡Œ

## ç›‘æ§å’Œæ—¥å¿—

### æ€§èƒ½æŒ‡æ ‡
- **æ”¶ç›Šç‡**: æ€»æ”¶ç›Šç‡ã€å¹´åŒ–æ”¶ç›Šç‡
- **å¤æ™®æ¯”ç‡**: é£é™©è°ƒæ•´åæ”¶ç›Š
- **æœ€å¤§å›æ’¤**: å†å²æœ€å¤§å›æ’¤
- **èƒœç‡**: ç›ˆåˆ©äº¤æ˜“å æ¯”
- **å¹³å‡æŒä»“æ—¶é—´**: å¥—åˆ©æœºä¼šæŒç»­æ—¶é—´

### å®æ—¶ç›‘æ§
- **ä»·å·®ç›‘æ§**: å®æ—¶ä»·å·®å˜åŒ–å›¾è¡¨
- **ä»“ä½ç›‘æ§**: å½“å‰ä»“ä½å’Œé£é™©æš´éœ²
- **äº¤æ˜“æ—¥å¿—**: è¯¦ç»†çš„äº¤æ˜“æ‰§è¡Œè®°å½•
- **ç³»ç»ŸçŠ¶æ€**: è¿æ¥çŠ¶æ€å’Œç³»ç»Ÿå¥åº·åº¦

## éƒ¨ç½²å’Œè¿ç»´

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux/macOS/Windows
- **Rustç‰ˆæœ¬**: 1.70+
- **å†…å­˜**: æœ€å°‘4GB RAM
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### éƒ¨ç½²æ­¥éª¤
1. å…‹éš†é¡¹ç›®ä»£ç 
2. é…ç½®äº¤æ˜“æ‰€APIå¯†é’¥
3. è°ƒæ•´ç­–ç•¥å‚æ•°
4. è¿è¡Œç³»ç»Ÿæµ‹è¯•
5. å¯åŠ¨äº¤æ˜“ç¨‹åº

### ç›‘æ§å‘Šè­¦
- **è¿æ¥å¼‚å¸¸**: WebSocketè¿æ¥æ–­å¼€å‘Šè­¦
- **ä»·å·®å¼‚å¸¸**: å¼‚å¸¸ä»·å·®æ³¢åŠ¨å‘Šè­¦
- **é£é™©å‘Šè­¦**: è¶…è¿‡é£é™©é˜ˆå€¼å‘Šè­¦
- **ç³»ç»Ÿå‘Šè­¦**: ç³»ç»Ÿèµ„æºä½¿ç”¨å‘Šè­¦

## å®‰å…¨è€ƒè™‘

### APIå®‰å…¨
- **å¯†é’¥ç®¡ç†**: ç¯å¢ƒå˜é‡å­˜å‚¨APIå¯†é’¥
- **æƒé™æ§åˆ¶**: æœ€å°æƒé™åŸåˆ™
- **åŠ å¯†ä¼ è¾“**: æ‰€æœ‰APIè°ƒç”¨ä½¿ç”¨HTTPS/WSS

### äº¤æ˜“å®‰å…¨
- **è®¢å•éªŒè¯**: å¤šé‡è®¢å•åˆæ³•æ€§æ£€æŸ¥
- **èµ„é‡‘ä¿æŠ¤**: ä¸¥æ ¼çš„èµ„é‡‘ä½¿ç”¨é™åˆ¶
- **å¼‚å¸¸å¤„ç†**: å®Œå–„çš„å¼‚å¸¸æƒ…å†µå¤„ç†æœºåˆ¶

## æ‰©å±•æ€§

### æ”¯æŒæ›´å¤šäº¤æ˜“æ‰€
- å®ç°ExchangeConnector trait
- æ·»åŠ æ–°çš„é…ç½®æ–‡ä»¶
- æ›´æ–°ç­–ç•¥é€»è¾‘ä»¥æ”¯æŒæ–°äº¤æ˜“æ‰€

### æ”¯æŒæ›´å¤šç­–ç•¥
- åŸºäºç°æœ‰æ¡†æ¶æ‰©å±•æ–°çš„å¥—åˆ©ç­–ç•¥
- æ”¯æŒå¤šå¸ç§å¥—åˆ©
- æ”¯æŒæœŸè´§ç°è´§å¥—åˆ©

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨æ›´é«˜æ•ˆçš„æ•°æ®ç»“æ„
- å®ç°å¹¶è¡Œå¤„ç†
- ä¼˜åŒ–ç½‘ç»œé€šä¿¡

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºMITè®¸å¯è¯å¼€æºï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚
